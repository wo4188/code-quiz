[384. 打乱数组 - 力扣（LeetCode）](https://leetcode.cn/problems/shuffle-an-array/solutions/672603/da-luan-shu-zu-yi-ding-gong-ping-de-xi-p-21iy/)

![](https://cdn.nlark.com/yuque/0/2025/png/22113300/1756491349302-e8646353-5740-4f00-bf60-41f5489d7e2b.png)



```javascript
// Knuth 洗牌算法

Array.prototype.toShuffled = function () {
  const arr = [...this];

  // 从后往前开始，直到 i = 1 为止
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1)); // [0, i] 范围的随机索引
    [arr[i], arr[j]] = [arr[j], arr[i]]; // 交换位置
  }

  return arr;
};

const arr = [1, 2, 3, 4];
arr.toShuffled();

// ❌ 不能确保随机性的均匀分布
// arr.toSorted(() => Math.random() - 0.5);

```

